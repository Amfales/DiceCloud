<template name="persona">
	<div fit>
		<div id="persona" class="scroll-y" fit>
			<div class="column-container">
				{{#with characterDetails}}
					<paper-shadow class="card"
								  hero-id="main" {{detailHero "details" _id}}>
						{{#unless picture}}
							<div class="top subhead characterField {{colorClass}}"
								 hero-id="toolbar" {{detailHero "details" _id}}>
								<div class="subhead" flex
									 hero-id="title" {{detailHero "details" _id}}>
									{{name}}
								</div>
							</div>
						{{else}}
							<core-image class="characterField clickable"
										style="height:350px; width: 100%;
											   background-color: #e8e8e8;"
										sizing="cover"
										hero-id="image" {{detailHero "details" _id}}
										src={{picture}}></core-image>
						{{/unless}}
						<div class="bottom">
							{{#if picture}}
								<div class="title" hero-id="title" {{detailHero "details" _id}}>
									{{name}}
								</div>
							{{/if}}
							<div class="subhead">
								{{alignment}} {{gender}} {{race}}
							</div>
						</div>
					</paper-shadow>
				{{/with}}
				{{> containerCard characterField "description" "Description"}}
				{{> containerCard characterField "personality" "Personality Traits"}}
				{{> containerCard characterField "ideals" "Ideals"}}
				{{> containerCard characterField "bonds" "Bonds"}}
				{{> containerCard characterField "flaws" "Flaws"}}
				{{> containerCard characterField "backstory" "Background"}}
				<paper-shadow class="card">
                    <div class="white top subhead">
                      Languages
					</div>
					<div class="bottom list">
						{{#each languages}}
							{{> proficiencyListItem}}
						{{/each}}
					</div>
				</paper-shadow>
			</div>
		</div>
	</div>
</template>

<template name="containerCard">
	{{#containerCardHelper this}}{{evaluateString _id body}}{{/containerCardHelper}}
</template>

<template name="containerCardHelper">
	<paper-shadow class="card {{class}}"
                  hero-id="main" {{detailHero field ../_id}}>
        <div class="top subhead {{colorClass}} {{topClass}}"
             hero-id="toolbar" {{detailHero field ../_id}}>
			<div class="subhead" flex
                 hero-id="title" {{detailHero field ../_id}}>
              {{title}}
          </div>
		</div>
		<div class="bottom">{{#markdown}}{{> UI.contentBlock}}{{/markdown}}</div>
	</paper-shadow>
</template>